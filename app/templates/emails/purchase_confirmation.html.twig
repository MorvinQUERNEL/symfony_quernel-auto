{% extends 'emails/_base.html.twig' %}

{% block title %}Confirmation de votre achat{% endblock %}

{% block content %}
    <h2 style="font-size: 20px; color: #FF6B00; margin-top: 0;">Merci pour votre achat !</h2>
    <p>Bonjour {{ user.firstname }},</p>
    <p>Nous sommes ravis de vous confirmer que votre commande a été validée avec succès. Vous êtes l'heureux propriétaire d'un nouveau véhicule !</p>
    
    <h3 style="border-bottom: 2px solid #eee; padding-bottom: 10px; margin-top: 30px;">Récapitulatif de votre commande #{{ order.id }}</h3>
    
    <table width="100%" border="0" cellspacing="0" cellpadding="0" style="margin: 20px 0;">
        <tr>
            <td width="150" style="padding-right: 20px;">
                {% if order.vehicule.pictures is not empty %}
                    <img src="{{ email.image('@public/uploads/vehicules/' ~ order.vehicule.pictures.first.name) }}" alt="{{ order.vehicule.brand }}" style="width: 150px; height: auto; border-radius: 5px;">
                {% endif %}
            </td>
            <td>
                <p style="margin: 0; font-size: 18px; font-weight: bold;">{{ order.vehicule.brand }} {{ order.vehicule.model }}</p>
                <p style="margin: 5px 0 0 0; color: #555;">{{ order.vehicule.year|date('Y') }} - {{ order.vehicule.mileage|number_format(0, ',', ' ') }} km</p>
            </td>
        </tr>
    </table>

    <table width="100%" border="0" cellspacing="0" cellpadding="0" style="margin: 20px 0; border-top: 1px solid #eee; border-bottom: 1px solid #eee;">
        <tr>
            <td style="padding: 15px 0;">Prix du véhicule</td>
            <td align="right" style="padding: 15px 0;">{{ (order.vehicule.salePrice / 100)|number_format(2, ',', ' ') }} €</td>
        </tr>
        <tr>
            <td style="padding: 15px 0;">Frais de service</td>
            <td align="right" style="padding: 15px 0;">{{ (order.serviceFees / 100)|number_format(2, ',', ' ') }} €</td>
        </tr>
        <tr style="font-weight: bold;">
            <td style="padding: 15px 0;">Total payé</td>
            <td align="right" style="padding: 15px 0;">{{ (order.totalPrice / 100)|number_format(2, ',', ' ') }} €</td>
        </tr>
    </table>
    
    <p>Nous allons préparer votre véhicule et vous contacterons très prochainement pour organiser la livraison. Vous pouvez suivre l'état de votre commande depuis votre espace client.</p>
    
    <p style="text-align: center; margin-top: 30px;">
        <a href="{{ url('app_profile') }}" style="background-color: #FF6B00; color: #ffffff; padding: 12px 25px; text-decoration: none; border-radius: 5px; font-weight: bold; display: inline-block;">
            Accéder à mon compte
        </a>
    </p>
{% endblock %} 