{% extends 'base.html.twig' %}

{% block title %}{{ vehicule.brand }} {{ vehicule.model }} - Quernel Auto{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/vehicules.css') }}">
    <link rel="stylesheet" href="{{ asset('css/vehicule-detail.css') }}">
{% endblock %}

{% block body %}
<div class="vehicule-detail-page">
    <header class="detail-page-header">
        <div class="header-content">
            <a href="{{ path('app_vehicules_index') }}" class="back-link"><i class="fas fa-arrow-left"></i> Retour au catalogue</a>
            <h1>{{ vehicule.brand }} {{ vehicule.model }}</h1>
            <p class="header-year">{{ vehicule.year|date('Y') }}</p>
        </div>
    </header>

    <div class="vehicule-detail-layout">
        <!-- Colonne de la galerie d'images -->
        <div class="gallery-container">
            <div class="main-image-wrapper">
                 {% if vehicule.pictures is not empty %}
                    <img src="{{ asset('uploads/vehicules/' ~ vehicule.pictures.first.name) }}" alt="Vue principale de {{ vehicule.brand }} {{ vehicule.model }}" id="main-image">
                {% else %}
                    <div class="no-image-placeholder-detail"><i class="fas fa-car-side"></i></div>
                {% endif %}
            </div>
            {% if vehicule.pictures|length > 1 %}
                <div class="thumbnail-gallery" id="thumbnail-gallery">
                    {% for picture in vehicule.pictures %}
                        <div class="thumbnail-item {{ loop.first ? 'active' : '' }}" data-image-url="{{ asset('uploads/vehicules/' ~ picture.name) }}">
                            <img src="{{ asset('uploads/vehicules/' ~ picture.name) }}" alt="Miniature {{ loop.index }}">
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <!-- Colonne des informations -->
        <div class="info-container">
            <div class="info-block price-block">
                <span class="price-label">Prix</span>
                <span class="price">{{ (vehicule.salePrice / 100)|number_format(0, ',', ' ') }} €</span>
                 {% if vehicule.status == 'Disponible' %}
                    <a href="#" class="btn-buy"><i class="fas fa-shopping-cart"></i> Acheter ce véhicule</a>
                {% else %}
                    <div class="status-badge-detail {{ vehicule.status|lower|replace({' ': '-'}) }}">
                        {{ vehicule.status }}
                    </div>
                {% endif %}
            </div>

            <div class="info-block specs-block">
                <h4><i class="fas fa-list-ul"></i> Caractéristiques</h4>
                <div class="specs-grid">
                    <div class="spec-item">
                        <span class="spec-label">Kilométrage</span>
                        <span class="spec-value">{{ vehicule.mileage|number_format(0, ',', ' ') }} km</span>
                    </div>
                    <div class="spec-item">
                        <span class="spec-label">Carburant</span>
                        <span class="spec-value">{{ vehicule.fuelType }}</span>
                    </div>
                    <div class="spec-item">
                        <span class="spec-label">Transmission</span>
                        <span class="spec-value">{{ vehicule.trasmission }}</span>
                    </div>
                    <div class="spec-item">
                        <span class="spec-label">Couleur</span>
                        <span class="spec-value">{{ vehicule.color }}</span>
                    </div>
                    <div class="spec-item">
                        <span class="spec-label">Portes</span>
                        <span class="spec-value">{{ vehicule.doorCount }}</span>
                    </div>
                </div>
            </div>

            {% if vehicule.description %}
            <div class="info-block description-block">
                <h4><i class="fas fa-align-left"></i> Description</h4>
                <p>{{ vehicule.description|nl2br }}</p>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('js/vehicule_detail.js') }}" defer></script>
{% endblock %} 